# floe-runtime E2E Test Infrastructure Environment Variables
# Copy this file to .env and customize as needed
#
# Usage:
#   cp env.example .env
#   # Edit values as needed
#   docker compose up -d

# ==============================================================================
# PostgreSQL Configuration
# ==============================================================================
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
POSTGRES_DB=postgres

# ==============================================================================
# LocalStack Configuration (S3 + STS for credential vending)
# ==============================================================================
# LocalStack uses fixed test credentials by default
# AWS_ACCESS_KEY_ID=test
# AWS_SECRET_ACCESS_KEY=test
AWS_REGION=us-east-1

# LocalStack endpoint for direct S3 access (from host)
# PyIceberg/clients use this when running outside Docker
LOCALSTACK_ENDPOINT=http://localhost:4566

# Enable debug logging (0=off, 1=on)
LOCALSTACK_DEBUG=0

# ==============================================================================
# Apache Polaris (Iceberg Catalog) Configuration
# ==============================================================================
# Format: realm,client_id,client_secret
# Note: Realm name MUST be POLARIS (the default realm)
POLARIS_BOOTSTRAP_CREDENTIALS=POLARIS,root,s3cr3t
# These are the OAuth2 credentials for the integration tests
POLARIS_CLIENT_ID=root
POLARIS_CLIENT_SECRET=s3cr3t

# ⚠️  TESTING ONLY - OAuth2 Scope Configuration
# PRINCIPAL_ROLE:ALL grants MAXIMUM PRIVILEGES and should NEVER be used in production!
# Production deployments must use narrowly-scoped principal roles, e.g.:
#   POLARIS_SCOPE=PRINCIPAL_ROLE:data_reader
#   POLARIS_SCOPE=PRINCIPAL_ROLE:etl_service
# See: https://polaris.apache.org/releases/1.0.0/configuring-polaris-for-production/
POLARIS_SCOPE=PRINCIPAL_ROLE:ALL

# ==============================================================================
# Cube (Semantic Layer) Configuration
# ==============================================================================
CUBEJS_API_SECRET=floe-cube-secret

# ==============================================================================
# OpenTelemetry Configuration (for tracing)
# ==============================================================================
OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4317
OTEL_SERVICE_NAME=floe-runtime

# ==============================================================================
# OpenLineage Configuration (for data lineage)
# ==============================================================================
OPENLINEAGE_URL=http://localhost:5000
OPENLINEAGE_NAMESPACE=floe-runtime
