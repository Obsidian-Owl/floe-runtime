#!/usr/bin/env bash
# Git pre-push hook - runs CI checks locally before push
# Install with: git config core.hooksPath .githooks

set -e

echo "üîç Running pre-push validation..."

# Run the check script
if [ -x "scripts/check.sh" ]; then
    ./scripts/check.sh
else
    echo "‚ö†Ô∏è  scripts/check.sh not found, running inline checks..."
    uv run ruff check .
    uv run ruff format --check .
    uv run mypy --strict packages/*/src/
    uv run pytest packages/*/tests/ -q
fi

echo "‚úÖ Pre-push checks passed!"
